<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style></style>
</head>
<body>
<script type="module">
    document.addEventListener("DOMContentLoaded", function () {
        // 创建一个新的SharedWorker对象
        const myWorker = new SharedWorker('SharedWorker.js', "SharedWorker"
            // name: 'my-shared-worker',
            // type: 'module', // 或者 'classic'
            // credentials: 'omit', // 或者 'same-origin' 或 'include'
            // sameSiteCookies: 'all' //  'all' 或 'none'
        );

        myWorker.port.start();

        // 使用SharedWorker对象
        myWorker.port.onmessage = function (e) {
            console.log("Message received from worker", e.data);
        };

        myWorker.addEventListener('error', function (e) {
            console.log("Error in worker:", e.message);
        })
        myWorker.port.postMessage('Hello, worker!');

        console.log("myWorker", myWorker)
        console.log("Message posted to worker");


    })
</script>
</body>
</html>